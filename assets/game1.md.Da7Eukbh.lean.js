import{d as G,p as H,v as N,V as j,c as B,o as T,j as C,_ as D,G as R}from"./chunks/framework.BGwacL8i.js";const W={class:"game-container"},L=G({__name:"Game",setup(P){const m=H(null);let k=null,l=null;function a(s){console.log(`[Game.vue] ${s}`);const t=document.getElementById("debug-info");if(t){t.innerHTML+=`<p>${s}</p>`;const g=t.querySelectorAll("p");g.length>20&&g[0].remove()}}N(async()=>{a("onMounted 开始执行"),typeof window<"u"?(l=await j(()=>import("./chunks/phaser.x5T6U4cP.js").then(s=>s.p),[]).then(s=>s.default||s),a("Phaser已可用！版本: "+l.VERSION),S()):a("Phaser只能在客户端环境中运行")});function S(){if(a("开始初始化游戏"),!m.value||!l){a("游戏容器或Phaser不存在");return}a(`Phaser版本: ${l.VERSION}`);try{const s={type:l.AUTO,width:800,height:600,parent:m.value,scene:{preload:E,create:I,update:V},physics:{default:"arcade",arcade:{gravity:{x:100}}}};k=new l.Game(s),a("游戏初始化成功")}catch(s){a(`游戏初始化失败: ${s}`)}}function E(){a("preload函数被调用"),this.load.image("sky","https://labs.phaser.io/assets/skies/space3.png"),this.load.image("player","https://labs.phaser.io/assets/sprites/xenon2_ship.png"),this.load.image("bullet","https://labs.phaser.io/assets/sprites/bullet.png"),this.load.image("monster1","https://labs.phaser.io/assets/sprites/master.png"),this.load.image("monster2","https://labs.phaser.io/assets/sprites/ufo.png"),this.load.image("monster3","https://labs.phaser.io/assets/sprites/space-baddie.png"),this.load.image("monster4","https://labs.phaser.io/assets/sprites/wasp.png")}function I(){a("create函数被调用");const s=this.add.tileSprite(0,0,1600,600,"sky");s.setOrigin(0,0),this.backgrounds=[s],a("背景创建完成，使用tileSprite实现无缝滚动");const t=this.physics.add.image(400,500,"player");t.setCollideWorldBounds(!0),this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("player",{start:0,end:3}),frameRate:10,repeat:5}),this.input.on("pointermove",function(i){this.gameOver||(t.x=i.x,t.y=i.y)},this),this.gameOver=!1,this.score=0,this.scoreText=this.add.text(500,10,`击杀: ${this.score}`,{font:"24px Arial",fill:"#ffffff",backgroundColor:"#000000",padding:{x:10,y:5}}),this.scoreText.setOrigin(1,0),this.scoreText.depth=9999;const g=30,y=this.physics.add.group({defaultKey:"bullet",maxSize:g}),d={current:g},c=this.add.text(10,10,`粒子高能光束: ${d.current}`,{font:"14px Arial",fill:"#ffffff",backgroundColor:"#000000"});c.depth=9999,console.log("子弹文本信息:",{x:c.x,y:c.y,text:c.text,depth:c.depth,visible:c.visible});function $(){d.current=Math.max(0,d.current-1),c.setText(`粒子高能光束剩余: ${d.current}`),console.log("子弹数量更新:",d.current)}this.input.on("pointerdown",function(i){if(!this.gameOver&&d.current>0){const e=y.get(t.x,t.y-20);e&&(e.setActive(!0),e.setVisible(!0),e.setVelocityY(-500),$(),e.checkWorldBounds=!0,e.on("worldbounds",function(r){y.killAndHide(r.gameObject)}))}else d.current<=0&&console.log("子弹已用完！")},this);const f=this.physics.add.group({runChildUpdate:!0}),M=["monster1","monster2","monster3","monster4"];function x(){const i=Math.floor(Math.random()*M.length),e=M[i],r=["top","left","right"],h=Math.floor(Math.random()*r.length),o=r[h];let p,u;switch(o){case"top":p=Math.floor(Math.random()*801)+0,u=-50;break;case"left":p=-50,u=Math.floor(Math.random()*601)+0;break;case"right":p=850,u=Math.floor(Math.random()*601)+0;break}const n=f.create(p,u,e);n.setCollideWorldBounds(!1),n.setBounce(.9);const b=Math.random()*1+1;n.setScale(b);const v=t.x-n.x,_=t.y-n.y,O=Math.sqrt(v*v+_*_),A=90;n.setVelocityX(v/O*A),n.setVelocityY(_/O*A),n.health=2,n.checkWorldBounds=!0,n.on("worldbounds",function(w){f.killAndHide(w.gameObject),w.gameObject.setActive(!1)})}this.time.addEvent({delay:800,callback:x,loop:!0}),this.time.addEvent({delay:800,callback:x,loop:!0}),this.time.addEvent({delay:800,callback:x,loop:!0}),this.physics.add.overlap(y,f,function(i,e){for(let h=0;h<25;h++){const o=this.add.sprite(e.x,e.y,"bullet");o.setScale(.3),o.setAlpha(1),o.setBlendMode(l.BlendModes.ADD);const p=Math.random()*360,u=50+Math.random()*100,n=e.x+Math.cos(p*Math.PI/180)*u,b=e.y+Math.sin(p*Math.PI/180)*u;this.tweens.add({targets:o,x:n,y:b,scale:3,alpha:0,duration:800,ease:"Power2.easeOut",onComplete:()=>{o.destroy()}})}y.killAndHide(i),i.setActive(!1),f.killAndHide(e),e.setActive(!1),e.body.enable=!1,e.disableBody(!0,!0),this.score+=1,this.scoreText.setText(`击杀: ${this.score}`),a("子弹击中怪物！分数: "+this.score)},null,this),this.physics.add.overlap(t,f,function(i,e){if(!this.gameOver&&e.active){this.gameOver=!0,a("玩家受到攻击！游戏结束！"),f.killAndHide(e),e.setActive(!1),e.body.enable=!1;const r=this.add.text(400,300,"菜 就多练",{font:"64px Arial",fill:"#ff0000",backgroundColor:"#000000",padding:{x:20,y:10}});r.setOrigin(.5),r.depth=9999;const h=this.add.text(400,200,`得分: ${this.score}`,{font:"32px Arial",fill:"#ffffff",backgroundColor:"#000000",padding:{x:20,y:10}});h.setOrigin(.5),h.depth=9999,this.physics.pause();const o=this.add.text(400,400,"man 再来一次",{font:"32px Arial",fill:"#ffffff",backgroundColor:"#0066cc",padding:{x:20,y:10}});o.setOrigin(.5),o.depth=9999,o.setInteractive(),o.on("pointerdown",function(){typeof window<"u"&&window.location.reload()},this)}},null,this),a("游戏场景创建完成")}function V(){this.backgrounds.forEach(t=>{t.tilePositionX+=2})}return(s,t)=>(T(),B("div",W,[t[0]||(t[0]=C("h2",null,"是男人就冲30杀！",-1)),C("div",{ref_key:"gameContainer",ref:m,class:"game-canvas"},null,512)]))}}),X=D(L,[["__scopeId","data-v-93dcfdf8"]]),U=JSON.parse('{"title":"","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"game1.md","filePath":"game1.md"}'),Y={name:"game1.md"},z=Object.assign(Y,{setup(P){return(m,k)=>(T(),B("div",null,[R(X)]))}});export{U as __pageData,z as default};
